<Window x:Class="search.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:search"
        mc:Ignorable="d"
        Title="Winamp Windows Search (WWS)" Height="600" Width="900">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/> <!-- Start Button & Options -->
            <RowDefinition Height="Auto"/> <!-- Dynamic Area (Winamp / Reports) -->
            <RowDefinition Height="*"/>    <!-- Tabs -->
            <RowDefinition Height="Auto"/> <!-- Status -->
        </Grid.RowDefinitions>

        <!-- Row 0: Start Button & Options -->
        <StackPanel Grid.Row="0" Orientation="Vertical" Margin="0,0,0,10">
            <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                <CheckBox x:Name="CheckVideos" Content="Videos" IsChecked="True" Margin="0,0,15,0" VerticalAlignment="Center"/>
                <CheckBox x:Name="CheckImages" Content="Images" Margin="0,0,15,0" VerticalAlignment="Center"/>
                <CheckBox x:Name="CheckOther" Content="Other Files" Margin="0,0,15,0" VerticalAlignment="Center"/>
            </StackPanel>
            
            <StackPanel Orientation="Horizontal">
                <Button x:Name="StartButton" Content="Start Scan &amp; Index" Click="StartScan_Click" Padding="10,5" FontWeight="Bold"/>
                <ProgressBar x:Name="ScanProgressBar" Width="300" Height="25" Margin="20,0,0,0" IsIndeterminate="True" Visibility="Collapsed"/>
            </StackPanel>
        </StackPanel>

        <!-- Row 1: Dynamic Area -->
        <Grid Grid.Row="1" Margin="0,0,0,10">
            <!-- Winamp Player Section (Visible during scan) -->
            <Border x:Name="WinampContainer" Background="#222" BorderBrush="#444" BorderThickness="2" Padding="10" CornerRadius="5" Visibility="Collapsed">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <!-- Col 0: Text Info -->
                    <StackPanel Grid.Column="0" Orientation="Vertical" VerticalAlignment="Center" Margin="0,0,10,0">
                        <TextBlock Text="WINAMP AUDIO PLAYER" Foreground="#00FF00" FontFamily="Consolas" FontSize="10" FontWeight="Bold"/>
                        <TextBlock Text="1. Swordfish.mp3 (128kbps)" Foreground="#00FF00" FontFamily="Consolas" FontSize="14" Margin="0,5,0,0"/>
                        <TextBlock x:Name="PlayerStatusText" Text="[STOPPED]" Foreground="#00FF00" FontFamily="Consolas" FontSize="12"/>
                    </StackPanel>

                    <!-- Col 1: Visualization -->
                    <Border Grid.Column="1" Background="#111" BorderBrush="#333" BorderThickness="1" Margin="5,2" VerticalAlignment="Stretch">
                        <UniformGrid x:Name="SpectrumGrid" Rows="1" VerticalAlignment="Bottom" Height="30"/>
                    </Border>

                    <!-- Col 2: Controls -->
                    <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                        <Button Content="PREV" Width="40" Background="#333" Foreground="#00FF00" BorderBrush="#00FF00" Margin="2"/>
                        <Button Content="PLAY" Click="PlayMusic_Click" Width="40" Background="#333" Foreground="#00FF00" BorderBrush="#00FF00" Margin="2"/>
                        <Button Content="PAUSE" Click="PauseMusic_Click" Width="40" Background="#333" Foreground="#00FF00" BorderBrush="#00FF00" Margin="2"/>
                        <Button Content="STOP" Click="StopMusic_Click" Width="40" Background="#333" Foreground="#00FF00" BorderBrush="#00FF00" Margin="2"/>
                        <Button Content="NEXT" Width="40" Background="#333" Foreground="#00FF00" BorderBrush="#00FF00" Margin="2"/>
                    </StackPanel>
                    
                    <MediaElement x:Name="WinampPlayer" LoadedBehavior="Manual" UnloadedBehavior="Manual" MediaEnded="WinampPlayer_MediaEnded" Visibility="Collapsed"/>
                </Grid>
            </Border>

            <!-- Reports Section (Visible after scan) -->
            <StackPanel x:Name="ReportContainer" Orientation="Vertical" Visibility="Visible">
                <!-- Report Content -->
                <Grid Margin="10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="300" />
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0">
                        <TextBlock x:Name="ReportSummaryTextBlock" Text="Scan Complete. 150 Files found." FontSize="16" Foreground="#00FF00" TextWrapping="Wrap" Margin="0,0,0,10"/>
                        
                        <TextBlock Text="Storage Breakdown by Location:" Foreground="#AAAAAA" Margin="0,10,0,5"/>
                        <DataGrid x:Name="LocationDataGrid" AutoGenerateColumns="False" Height="150" Background="#222" RowBackground="#333" AlternatingRowBackground="#222" Foreground="#EEE" BorderBrush="#444" HeadersVisibility="Column">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Location" Binding="{Binding Location}" Width="*" />
                                <DataGridTextColumn Header="Size" Binding="{Binding DisplaySize}" Width="100" />
                            </DataGrid.Columns>
                        </DataGrid>
                    </StackPanel>

                    <!-- Pie Chart Section -->
                    <StackPanel Grid.Column="1" Margin="20,0,0,0">
                        <TextBlock Text="Storage Visualization" Foreground="#AAAAAA" HorizontalAlignment="Center" Margin="0,0,0,10"/>
                        <Canvas x:Name="StoragePieChartCanvas" Width="200" Height="200" HorizontalAlignment="Center"/>
                        
                        <!-- Legend -->
                        <StackPanel Margin="0,15,0,0" HorizontalAlignment="Center">
                            <StackPanel Orientation="Horizontal" Margin="0,2">
                                <Rectangle Width="12" Height="12" Fill="LightGray" Margin="0,0,5,0"/>
                                <TextBlock Text="Free Space" Foreground="#DDD"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0,2">
                                <Rectangle Width="12" Height="12" Fill="#444" Margin="0,0,5,0"/>
                                <TextBlock Text="Other Files" Foreground="#DDD"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0,2">
                                <Rectangle Width="12" Height="12" Fill="DodgerBlue" Margin="0,0,5,0"/>
                                <TextBlock Text="Indexed Files" Foreground="#DDD"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0,2">
                                <Rectangle Width="12" Height="12" Fill="Red" Margin="0,0,5,0"/>
                                <TextBlock Text="Duplicates (Waste)" Foreground="#DDD"/>
                            </StackPanel>
                        </StackPanel>
                    </StackPanel>
                </Grid>
            </StackPanel>
        </Grid>

        <TabControl Grid.Row="2">
            <TabItem Header="All Indexed Files">
                <DataGrid x:Name="VideoDataGrid" AutoGenerateColumns="False" IsReadOnly="True" HeadersVisibility="Column">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Type" Binding="{Binding Type}" Width="60"/>
                        <DataGridTextColumn Header="File Name" Binding="{Binding FilePath}" Width="*"/>
                        <DataGridTextColumn Header="Size" Binding="{Binding DisplaySize}" Width="100"/>
                        <DataGridTextColumn Header="Duration" Binding="{Binding DisplayDuration}" Width="100"/>
                    </DataGrid.Columns>
                </DataGrid>
            </TabItem>
            <TabItem Header="Duplicate Files">
                <DataGrid x:Name="DuplicateDataGrid" AutoGenerateColumns="True" IsReadOnly="True" HeadersVisibility="Column"/>
            </TabItem>
            <TabItem Header="Logs" IsSelected="True">
                <RichTextBox x:Name="LogRichTextBox" IsReadOnly="True" VerticalScrollBarVisibility="Auto" Background="Black" Foreground="White" FontFamily="Consolas">
                    <FlowDocument>
                        <Paragraph>
                            <Run Text="Ready to scan..."/>
                        </Paragraph>
                    </FlowDocument>
                </RichTextBox>
            </TabItem>
        </TabControl>

        <StatusBar Grid.Row="3" Margin="0,10,0,0">
            <StatusBarItem>
                <TextBlock x:Name="StatusText" Text="Ready."/>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>
